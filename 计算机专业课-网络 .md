

## 2、 计算机网络

### 2.1 物理层

![image-20240902151613703](img/image-20240902151613703.png)

![image-20240919142536244](img/image-20240919142536244.png)

![image-20240902154024027](img/image-20240902154024027.png)





![image-20240919150101134](img/image-20240919150101134.png)





![image-20240902163651718](img/image-20240902163651718.png)

| 编码类型     | 0，1表示                            | 中间是否归0                   | 浪费带宽否 | 抗干扰能力 | 自同步能力 |
| ------------ | ----------------------------------- | ----------------------------- | ---------- | ---------- | ---------- |
| NRZ          | 水平触发，高电平1，低电平0          | 不归0                         | 不浪费     | 弱         | 无         |
| RZ           | 水平触发，高电平1，低电平0          | 高电平中间归0                 | 浪费       | 弱         | 有         |
| NRZI         | 边缘触发，跳0，不跳1.与电平高低无关 | 不归0                         | 浪费一点   | 弱         | 无         |
| 曼彻斯特     | 水平触发，前半段高电平1，低电平0    | 不是归0，是中间反转到相反电平 | 浪费       | 强         | 有         |
| 差分曼彻斯特 | 边缘触发，跳0，不跳1.与电平高低无关 | 不是归0，是中间反转到相反电平 | 浪费       | 强         | 有         |



![image-20240919152850614](img/image-20240919152850614.png)

![image-20240902154807905](img/image-20240902154807905.png)



![image-20241007095641636](img/image-20241007095641636.png)

![image-20240902160217668](img/image-20240902160217668.png)

![image-20240902164132469](img/image-20240902164132469.png)

![image-20240919155818474](img/image-20240919155818474.png)

![image-20240919160328702](img/image-20240919160328702.png)

### 2.2 数据链路层

链路层可以提供无连接的、不确认的投递服务，也可以提供带确认的、面向连接的服务，具体取决于所使用的技术和协议。例如以太网（Ethernet）是一个典型的无连接链路层协议。点对点协议（PPP）是一种可以提供面向连接服务的链路层协议。在PPP中，可以在数据传输之前建立一个连接，这个连接确保了数据的顺序和错误检测。例如后面介绍的CSMA协议是带确认的无连接的服务。确认机制在链路层协议里其实是一个挺重要的机制。

所以链路层为网络层提供了：

1. 无确认无连接的服务
2. 有确认的无连接服务
3. 有确认的面向连接的服务

面向连接的一定有确认，所以不存在无确认的带连接的服务。



链路层也有些场景是带流量控制的，不是都像tcp/ip协议一样不依赖链路层的流量控制。例如WIFI的IEEE 802.11标准中的流量控制机制允许接入点（AP）或站点在接收缓冲区满时发送流量控制帧，指示发送方暂停发送数据。



![image-20240902194809411](img/image-20240902194809411.png)

![image-20240902195649551](img/image-20240902195649551.png)

![image-20240925134020088](img/image-20240925134020088.png)

![image-20240925135430604](img/image-20240925135430604.png)





![image-20240923134950559](img/image-20240923134950559.png)

![image-20240919213848561](img/image-20240919213848561.png)

![image-20240902205912228](img/image-20240902205912228.png)



![image-20240903130038247](img/image-20240903130038247.png)

![image-20240919213242010](img/image-20240919213242010.png)

![image-20240915145041152](img/image-20240915145041152.png)

![image-20240903132052655](img/image-20240903132052655.png)

![image-20240903140427043](img/image-20240903140427043.png)

![image-20240903142656852](img/image-20240903142656852.png)

![image-20240903143115724](img/image-20240903143115724.png)

![image-20240903145544169](img/image-20240903145544169.png)

![image-20240903150206071](img/image-20240903150206071.png)

![image-20241021080504208](img/image-20241021080504208.png)

### 2.3 网络层

![image-20241021083936790](img/image-20241021083936790.png)

![image-20241021100229657](img/image-20241021100229657.png)

几个长度字段的详情

|                   | 意义                                                         | 字段长度       | 长度单位 |
| ----------------- | ------------------------------------------------------------ | -------------- | -------- |
| MTU               | 上层提交给链路层的“用户数据”最大长度                         | 不在协议里体现 | 1 Byte   |
| IP头部的总长度    | IP报文的总长度，含首部                                       | 16bit          | 1 Byte   |
| IP头部的首部长度  | IP报文首部长度                                               | 4bit           | 4 Byte   |
| IP头部的片偏移    | IP分片，当前分片的用户数据在原IP报文的用户数据里的偏移，辅助以MF和DF 标记 | 13bit          | 8 Byte   |
| TCP头部的数据偏移 | TCP报文首部的长度，即用户数据开始的偏移                      | 4bit           | 4 Byte   |
|                   | TCP没有总长度，UDP没有首部长度（也没有数据偏移，首部固定）   |                |          |
| UDP头部的总长度   | UDP报文的总长度，含首部                                      | 16 bit         | 1 Byte   |

![image-20240903193456045](img/image-20240903193456045.png)

![image-20240903194758794](img/image-20240903194758794.png)



![image-20240924103524446](img/image-20240924103524446.png)



![image-20240903202514074](img/image-20240903202514074.png)

#### 2.3.3 RIP、OSFP和BGP路由协议

##### BGP

![image-20240903205847174](img/image-20240903205847174.png)

##### RIP

![image-20240903203954926](img/image-20240903203954926.png)

![image-20240926231917112](img/image-20240926231917112.png)

##### OSFP

![image-20241017094131914](img/image-20241017094131914.png)



![image-20240905095319256](img/image-20240905095319256.png)

![image-20240905100323651](img/image-20240905100323651.png)

![image-20240905101138758](img/image-20240905101138758.png)



![image-20240925094216945](img/image-20240925094216945.png)

### 2.4 传输层

![image-20240905103728386](img/image-20240905103728386.png)

![image-20240905105105832](img/image-20240905105105832.png)



![image-20240929101231544](img/image-20240929101231544.png)

![image-20240929102837150](img/image-20240929102837150.png)

![image-20240905110205763](img/image-20240905110205763.png)

![image-20240905151243456](img/image-20240905151243456.png)

![image-20240905151604467](img/image-20240905151604467.png)



![image-20240915153459401](img/image-20240915153459401.png)

![image-20240923134324532](img/image-20240923134324532.png)

### 2.5 应用层

![image-20241023084640377](img/image-20241023084640377.png)

![image-20240926115705222](img/image-20240926115705222.png)

![image-20240905153946428](img/image-20240905153946428.png)

![image-20240905160857728](img/image-20240905160857728.png)

![image-20240905161936423](img/image-20240905161936423.png)

SMTP（简单邮件传输协议）本身主要用于文本数据的传输，而不是直接传输二进制数据（如图片）。然而，二进制文件（例如图片）可以通过特定的编码方式嵌入到邮件中。SMTP邮件通常会结合MIME来处理非文本内容。MIME允许邮件携带多种类型的内容，包括二进制文件。**Base64编码**是最常用的编码方法，将二进制数据转换为ASCII字符。Base64编码会将每3个字节的二进制数据转换为4个ASCII字符。

下面是一个邮件结构示例：

```
From: sender@example.com
To: recipient@example.com
Subject: Here is an image
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="boundary_string"

--boundary_string
Content-Type: image/jpeg; name="example.jpg"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="example.jpg"

[Base64编码的图片数据]
--boundary_string--

```









